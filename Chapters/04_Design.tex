\chapter{Design} 

In order to bridge the information gap regarding home energy systems, this study aims to provide households with knowledge of available technologies in the market. 
Based on the findings from pre-study and to address the potential issue of information overload, the study proposes a home energy system recommender to present households with a tailored selection of technologies that better fit their unique home situations. 
For instance, by learning the location of the house, in order to estimate the amount of sunlight it is likely to receive over the course of a year, to evaluate whether installing a \gls{pv} system would be a viable and economic way for the household.
The learning theory suggests that individuals learn new knowledge by connecting it with existing knowledge and experiences, as this helps to create a framework for understanding and retention of the new information.
Therefore, by focusing on personalised recommendations, the study hypothesises that households may be more receptive to learning about home energy technologies. 
Meanwhile, nudging house owners towards making informed decisions. 


\section{Design concept: The home energy system recommender}

The home energy system recommender is a software application that integrates the FLEX models,
offering personalised recommendations to households based on their individual circumstances.
Through the recommended technology configurations and simulated energy costs, 
users will not only be guided on these technologies but also be educated on the potential benefits of transitioning to more sustainable energy systems. 


\section{Input to the recommender}


\subsection{Household profiles}

The concept of household profile has been developed to gain insights into the energy demand and supply dynamics of households. 
To ensure the accuracy of this profile, therefore accurately anticipate household's energy costs, 
various factors that may impact the household's energy consumption must be taken into consideration, 4 categories as shown in Figure \ref{fig:profile}, they are 
\emph{the external environment, building materials, energy consumption behaviors, and the current home energy system.}
By creating such a profile, a comprehensive understanding of the household's situation can be attained, enabling the offering of more tailored and effective recommendations.
\begin{figure}[h]
  \centering
  \includegraphics[width=0.4\textwidth]{Images/household_profile.jpg}
  \caption{Household profile}
  \label{fig:profile}
\end{figure}

The categories were inspired by the FLEX models \cite{newtrends}.
The models take a set of variables into account when simulating, they can be divided into following 15 categories: 
\emph{
    behaviour profile,
    battery,
    behaviour, 
    boiler,
    building,
    energy price,
    heating element, 
    hot water tank,
    \gls{pv},
    region,
    space cooling technology,
    space heating tank,
    vehicle,
    energy price,
    region weather. 
}
The specific data required by the FLEX models within each category can be found in Appendix \ref{appendix:inputdata}. 


\subsection{Households data collection}

While collecting more data leads to increased accuracy in simulations, it is crucial to maintain user-friendly by not overwhelming users with excessive information requests. 
To strike a balance, a set of 13 questions (as outlined in Table \ref{tab:questions}) was developed to gather relevant information for household profile analysis. 
Using the provided user answers, additional specific information can be inferred. 
For example, by inputting the construction period of the house, corresponding details such as building materials and sizes can be assumed. 

\begin{center}
  \small
    \begin{longtable}{ | p{.20\textwidth} | p{.20\textwidth} | p{.45\textwidth} | }
        \hline
        Category & Question & Note \\
        \hline
        External environment & Where is the house located? & Understanding the location of the house can provide valuable insight into its environmental factors, such as the amount of sunlight it receives. \\
        \hline
        House condition & When was the house built? & Knowing the year a house was built can provide insight into its construction materials, such as the composition of the walls. \\
          & Has the house ever been renovated before? & Renovations can include upgrading insulation, replacing windows with energy-efficient ones, installing high-efficiency HVAC systems, sealing air leaks, etc. \\
          & What have been renovated in the house? &   \\
        \hline
        Energy use & How many people are living in the house? &   \\
          & How often does each adult work from home? &   \\
          & Is there any air conditioner in the house? &   \\
          & What type of heating energy is used in the house? &   \\
        \hline
        Home energy system  & Is there a photovoltaic (PV) system in the House? & A \gls{pv} system is a system that uses solar panels to convert sunlight into electricity for use in a building. \\    
          & What is the size of the \gls{pv} system? & The average size of a \gls{pv} system is 5 kilowatt-peak. \\
          & Is there a battery system in the house? & A home battery system is a device that stores energy produced by solar panels or other sources to be used later when needed. \\
          & What is the capacity of the battery? & The average capacity of a home battery system is around 7 kilowatt-hours. \\
          & Is there a smart energy management system (SEMS) in the house? & A \gls{sems} is a technology to optimise energy usage, monitor consumption, and enhance energy efficiency. \\
        \hline
    \caption{Survey questions}
    \label{tab:questions}
    \end{longtable}
\end{center}

To further enhance user experience, a decision tree approach was implemented, enabling users to navigate through the questionnaire without the obligation to answer all questions.
As a result, the number of questions to be answered ranges from a maximum of 13 to a minimum of 10, as depicted in Figure \ref{fig:trees}. 
\begin{figure}[h!]
  \centering
  \includegraphics[width=\textwidth]{Images/trees.jpg}
  \caption{Question decision trees}
  \label{fig:trees}
\end{figure}


\section{Output to the recommender}

\subsection{Recommendations}

An effective home energy system should prioritise 
\emph{minimizing energy waste, reducing dependence on non-renewable fossil fuels, and lowering overall energy costs. }
All recommendations aligned with these fundamental principles, 
aim to promote sustainable energy practices while also reducing household energy expenditures will be presented to users. 

\subsubsection{Recommendation orders}
The recommendations are categorised into different levels, 
each offering different technology configurations along with their corresponding yearly energy bills. 
The default order of the recommendations follows a prioritisation based on potential cost savings. 
Therefore, the configuration that offers the highest amount of money saved will be listed at the top, followed by the second-best money-saving configuration, and so forth. 
This ordering allows users to easily identify the most financially advantageous options for their energy system.
In addition to the default ordering, users also have the option to select an alternative ordering rule. 
The alternative rule ranks the recommendations based on investment cost, with the configurations requiring the least expenses listed at the top. 
Two distinct ways of ordering options provides users with flexibility, allowing them to prioritise their choices based on their individual financial considerations. 

%The objectives of the recommendation system are multi-fold. 
%Firstly, the system aims to support homeowners in making informed decisions regarding investments in home energy systems. 
%Additionally, the system intends to encourage behavior change among homeowners by promoting the utilization of renewable energy sources. 
%Finally, the recommendation system seeks to continuously refine and improve the accuracy of its predictive model, ensuring that the recommendations provided are up-to-date and effective. 
%By providing users with tailored recommendations, the system aims to facilitate the adoption of energy technologies, ultimately leading to reduced energy demand and associated costs. 
%
%As noted by Karen Palmer et al. \cite{informationgap}, financial considerations are of primary importance to homeowners when making decisions about energy investments. 
%In line with this understanding, the recommendation system places a strong emphasis on providing transparent cost estimates for energy bills as well as recommended home energy system configurations. 
%Additionally, the system seeks to encourage behavior change by providing information and education on climate change and renewable energy sources, aimed at increasing user awareness and understanding of the benefits of sustainable energy practices. 
%To facilitate ongoing improvement and refinement of the recommendation system, a feedback survey button will be incorporated, allowing users to provide both short-term and long-term feedback on the system's performance and recommendations. 

\subsection{Explainability}

Explainability plays a crucial role in establishing trust among users in Recommendation Systems (\gls{rs}), and this principle holds true for our system as well. 
A study conducted by Kim et al. \cite{xai4endusers} examined the explainability needs of 20 diverse end-users 
and revealed that the level of explainability required varied based on participants' backgrounds in AI and their interests in the domain. 
While there was a general curiosity about AI among participants, only those with a high level of AI expertise or a significant interest in the domain expressed a need for detailed explanations regarding the \gls{rs} system. 
Therefore, it is essential to provide different levels of explanations to accommodate the varying characteristics of users and meet their specific needs. 

\subsubsection{Explanation}

The explanations provided by the system are intended to serve three purposes: effectiveness, trust, and education. 
\emph{Effectiveness} The system aims to support users in making informed decisions by providing the corresponding yearly energy bill as the first level of explanation. As they can immediately gauge the financial implications and potential cost savings associated with each recommendation. 
\emph{Trust} By offering more detailed simulated energy consumption patterns as the second level of explanation, users gain a deeper understanding of how the energy bills are calculated in the recommended configurations, thereby building trust and confidence in the accuracy and reliability of the system's outcomes.
\emph{Education} As the third level of explanation, the system utilises explanations as educational tools to offer users valuable insights into the recommended technologies and their impact on energy bills, furthermore, the system can also provide information about the broader context of climate change, helping users understand the larger picture and the importance of sustainable energy practices.


\subsubsection{Exploration}

In order to provide more comprehensive and understandable recommendations, we have chosen to explain our recommendations from multiple perspectives beyond just cost estimates. 
Specifically, we have identified 4 key objectives, including \emph{trust, effectiveness, education, and debugging}, as key aspects to incorporate into our explanations. 
\emph{Trust}, we build trust with our users by using reliable data sources and providing transparent services. 
\emph{Effectiveness}, we strive to enhance the effectiveness of our service by offering recommendations that could actually benefit users economically. 
\emph{Education}, we seek to educate our users on the importance of environmental protection by sharing relevant knowledge and insights. 
\emph{De-bugging}, we value user feedback as an important tool for identifying and resolving any issues or bugs in our system, allowing us to continuously improve and refine our service.
The reasons for offering such explanations are to familiarise users with these technologies, establish accountability in the decision-making process, and encourage a shift towards environmentally conscious behaviour.
By incorporating these concepts into our explanations, we aim to provide recommendations that are transparent, trustworthy, understandable, and user-centred. 

Our recommendation system employs a three-level explainability framework to enhance user understanding of the recommended home energy system configurations. 
At the first level, the system provides an explanation in terms of the expected energy bill for the household. 
At the second level, the system offers a behavioural explanation of energy consumption patterns and the factors driving them. 
Finally, at the third level, the system aims to increase users' awareness and understanding of renewable energy and environmental protection.

Furthermore, the explanation is divided into three layers. 
At the first layer, users are provided with a comprehensive summary of their current energy consumption patterns. 
At the second layer, users are introduced to the various functionalities and benefits of the recommended energy technologies, including cost-saving potential and environmental impact. 
Finally, at the last layer, users are presented with simulated energy demand and supply data, allowing them to see the potential energy savings that could result from adopting the recommended configurations. 

Through the implementation of a comprehensive approach to explainability, our objective is to offer users an overview of energy technologies, enabling them to gain insight into their energy consumption patterns and to recognize the advantages of shifting towards more sustainable energy systems.


\subsection{Investments}

\begin{center}
    \begin{table}[h]
    \small
        \begin{tabular}{ | p{.30\textwidth} | p{.15\textwidth}  p{.15\textwidth}  p{.15\textwidth}  p{.15\textwidth} | }
            \hline
            Technology & \multicolumn{4}{ c | }{Cost (\euro{})} \\
             & Lowest & Highest & Installation & Maintenance \\
            \hline
            \gls{pv} system & \SI[per-mode=symbol,bracket-unit-denominator = false]{1957,68}{\per\kW}p & \SI[per-mode=symbol,bracket-unit-denominator = false]{2231,76}{\per\kW}p & included & 0 \\
            Battery system & \SI[per-mode=symbol,sticky-per,bracket-unit-denominator = false]{790,80}{\per\kWh}  & \SI[per-mode=symbol,sticky-per,bracket-unit-denominator = false]{2520,00}{\per\kWh} & included & 0 \\
            \gls{sems} & / & 1516,11 & 379,03 & 0 \\
            \gls{hp}& \SI[per-mode=symbol,bracket-unit-denominator = false]{432,15}{\per\kW} & \SI[per-mode=symbol,bracket-unit-denominator = false]{2370,31}{\per\kW} & included & 0 \\
            Hot water tank & 1 & 1 & 1 & 0 \\
            Space heating tank & 1 & 1 & 1 & 0 \\
            Air conditioner & 1 & 1 & 1 & 0 \\
            Basement renovation & \SI[per-mode=symbol]{132,12}{\per\metre\squared} & \SI[per-mode=symbol]{157,64}{\per\metre\squared} & included & 0 \\
            Roof renovation & \SI[per-mode=symbol]{40,95}{\per\metre\squared} & \SI[per-mode=symbol]{409,38}{\per\metre\squared} & included & 0 \\
            Wall renovation & \SI[per-mode=symbol]{67,57}{\per\metre\squared} & \SI[per-mode=symbol]{408,93}{\per\metre\squared} & included & 0 \\
            Window renovation & \SI[per-mode=symbol]{364,63}{\per\metre\squared} & \SI[per-mode=symbol]{958,92}{\per\metre\squared} & included & 0 \\
            \hline
        \end{tabular}
    \caption{Investment costs of different technologies}
    \label{tab:investments}
    \end{table}
\end{center}


\subsubsection{Presetation}

Natural-language-based
Visualisation
List


\section{Medium}


\section{Interfaces}

\subsection{Home page}

To facilitate user understanding of the recommended home energy system configurations and associated costs, our recommendation system will employ a visual and natural language explanation interface. 
Specifically, an interactive visualization tool will be implemented to enable users to explore and compare different energy system configurations in terms of energy consumption patterns and costs. 
Additionally, natural language explanations will be provided to further enhance user understanding and engagement with the recommended configurations. 

\subsection{Data collection}

\subsection{Data visualisation}


